<!DOCTYPE html>
<html lang="en">
    <head>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <title>Define a namespace and create a closure | Fluid Infusion</title>
        <link rel="stylesheet" href="../css/normalize.css">
        <link rel="stylesheet" href="../css/foundation.css">
        <link rel="stylesheet" href="../css/highlightjs-custom.css">
        <link rel="stylesheet" type="text/css" href="../lib/infusion/src/framework/preferences/css/Enactors.css" />
        <link rel="stylesheet" type="text/css" href="../lib/infusion/src/framework/preferences/css/PrefsEditor.css" />
        <link rel="stylesheet" type="text/css" href="../lib/infusion/src/framework/preferences/css/SeparatedPanelPrefsEditor.css" />
        <link rel="stylesheet" href="../css/infusion-docs.css">

        <link rel="icon" type="image/png" href="../images/favico.png">

        <script type="text/javascript" src="../lib/infusion/infusion-uio.js"></script>
    </head>
    <body class="infusion-docs">

        <div class="container infusion-docs-container">

            <!-- BEGIN markup for Preference Editor -->
            <div class="flc-prefsEditor-separatedPanel fl-prefsEditor-separatedPanel">
                <!-- This is the div that will contain the Preference Editor component -->
                <div class="flc-slidingPanel-panel flc-prefsEditor-iframe"></div>

                <!-- This div is for the sliding panel that shows and hides the Preference Editor controls -->
                <div class="fl-panelBar">
                    <span class="fl-prefsEditor-buttons">
                        <button id="reset" class="flc-prefsEditor-reset fl-prefsEditor-reset"><span class="fl-icon-undo"></span> Reset</button>
                        <button id="show-hide" class="flc-slidingPanel-toggleButton fl-prefsEditor-showHide"> Show/Hide</button>
                    </span>
                </div>
            </div>
            <!-- END markup for Preference Editor -->

            <script type="text/javascript">
                fluid.uiOptions.prefsEditor(".flc-prefsEditor-separatedPanel", {
                    "templatePrefix": "../lib/infusion/src/framework/preferences/html/",
                    "messagePrefix": "../lib/infusion/src/framework/preferences/messages/",
                    "tocTemplate": "../lib/infusion/src/components/tableOfContents/html/TableOfContents.html"
                });
            </script>

            <header class="row infusion-docs-header">
                <div class="infusion-docs-fluidLogo small-12 medium-3 column">
                    <a class="infusion-docs-fluidLogoText" href="../index.html" title="Infusion">infusion</a>
                </div>

                <nav class="small-12 medium-9 column">
                    <a href="../index.html" title="Infusion">Infusion</a>
                    <a href="../index-tutorials.html" title="Tutorials">Tutorials</a>
                    <a href="../index-api.html" title="A P I">API</a>
                </nav>
            </header>

            <div class="row infusion-docs-mainBody">
                <nav class="infusion-docs-TOC small-12 medium-3 column">
                    
                        
                        
                    
                        
                        
                            <span class="infusion-docs-category">Tutorials</span>
                            
                                <span class="infusion-docs-sectionName">Getting Started</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="GettingStartedWithInfusion.html"><span class="infusion-docs-TOC-pageName">Getting started with Infusion</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="SetUpYourEnvironment.html"><span class="infusion-docs-TOC-pageName">Set up your environment</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <span class="infusion-docs-TOC-pageName">Define a namespace and create a closure</span>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="PickAComponentType.html"><span class="infusion-docs-TOC-pageName">Pick a component type</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="BasicComponentCreation-LittleComponents.html"><span class="infusion-docs-TOC-pageName">Basic Component Creation - Little Components</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ModelComponents.html"><span class="infusion-docs-TOC-pageName">Model Components</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="EventedComponents.html"><span class="infusion-docs-TOC-pageName">Evented Components</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ViewComponents.html"><span class="infusion-docs-TOC-pageName">View Components</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="RendererComponents.html"><span class="infusion-docs-TOC-pageName">Renderer Components</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Subcomponents.html"><span class="infusion-docs-TOC-pageName">Subcomponents</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Preferences Editor</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="../tutorial-creatingAPreferencesEditorUsingThePreferencesFramework/CreatingAPreferencesEditorUsingThePreferencesFramework.html"><span class="infusion-docs-TOC-pageName">Creating a preferences Editor Using the Preferences Framework</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="../tutorial-creatingAPreferencesEditorUsingThePreferencesFramework/CreatingAPrimarySchema.html"><span class="infusion-docs-TOC-pageName">Creating a Primary Schema</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="../tutorial-creatingAPreferencesEditorUsingThePreferencesFramework/CreatingPanels.html"><span class="infusion-docs-TOC-pageName">Creating Panels</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="../tutorial-creatingAPreferencesEditorUsingThePreferencesFramework/CreatingEnactors.html"><span class="infusion-docs-TOC-pageName">Creating Enactors</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="../tutorial-creatingAPreferencesEditorUsingThePreferencesFramework/CreatingAnAuxiliarySchema.html"><span class="infusion-docs-TOC-pageName">Creating an Auxiliary Schema</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="../tutorial-creatingAPreferencesEditorUsingThePreferencesFramework/InstantiatingThePreferencesEditor.html"><span class="infusion-docs-TOC-pageName">Instantiating the Preferences Editor</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="../tutorial-creatingAPreferencesEditorUsingThePreferencesFramework/InstantiatingTheEnhancerAndSettingsStoreOnly.html"><span class="infusion-docs-TOC-pageName">Instantiating the Enhancer and Settings Store Only</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="../tutorial-creatingAPreferencesEditorUsingThePreferencesFramework/StylingThePreferencesEditor.html"><span class="infusion-docs-TOC-pageName">Styling the Preferences Editor</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="../to-do/AddingPrefsEditorToSite.html"><span class="infusion-docs-TOC-pageName">Adding a Basic Preferences Editor to a Site</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="../to-do/WorkingWithPrefsEditorOnSite.html"><span class="infusion-docs-TOC-pageName">Working With A Preferences Editor On Your Site</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="../tutorial-usingStringTemplates/UsingStringTemplates.html"><span class="infusion-docs-TOC-pageName">Using String Templates</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Creating an Adjuster UI</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="../tutorial-creatingANewAdjusterUI/CreatingANewAdjusterUI.html"><span class="infusion-docs-TOC-pageName">Creating a New Adjuster UI</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="../tutorial-creatingANewAdjusterUI/HowToCreateAndUseFontIcons.html"><span class="infusion-docs-TOC-pageName">How to Create and Use Font Icons</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">User Interface Options</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="../tutorial-userInterfaceOptions/UserInterfaceOptions.html"><span class="infusion-docs-TOC-pageName">User Interface Options</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                        
                    
                        
                        
                    
                </nav>

                <article class="infusion-docs-mainContent small-12 medium-9 column">

                    <div class="flc-toc-tocContainer infusion-docs-toc"> </div>

                    <h1>Define a namespace and create a closure</h1>

                    <p class="infusion-docs-githubLink"><a href="https://github.com/fluid-project/infusion-docs/blob/master/src/documents/tutorial-gettingStartedWithInfusion/DefineANamespaceAndCreateAClosure.md" target="_blank">Edit on GitHub</a></p>

                    

                    <div class="infusion-docs-articleBody">
                        <hr>
<p>Part of the <a href="GettingStartedWithInfusion.html">Getting Started with Infusion Tutorial</a></p>
<hr>
<p>Infusion code generally follows a few conventions that we recommend, and that we&#39;ll use in this tutorial. We&#39;ll start with two of them:</p>
<ol>
<li>namespacing, and</li>
<li>closures</li>
</ol>
<h3 id="namespacing">Namespacing</h3>
<p>We define a namespace for our code: a single global variable that becomes the container for the code. This means there&#39;s less chance of bad interactions with other code: Anything we want to be public will be attached to this object, so all of our code will be qualified by the namespace.</p>
<h3 id="closures">Closures</h3>
<p>By wrapping the code inside an anonymous function, we can separate private and public functions. Only objects or functions that are attached to the global namespace object will be publicly available. Anything else inside the anonymous function will be invisible to the rest of the world. In general, we recommend against the use of private definitions since they inhibit other developers from getting value from your code. Write every function and piece of data as a public member of your namespace, with a suitable comment if you don&#39;t intend them to form a stable part of your API. Of course, make sure not to write any mutable shared state in public - in general, you should make sure any mutable state is packaged as part of a <a href="ModelComponents.html">Model-bearing Component</a>.</p>
<h2 id="general-structure">General Structure</h2>
<p>So what does this look like in general?</p>
<pre class="highlight"><code class="hljs javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, fluid)</span> {</span>
    fluid.registerNamespace(<span class="hljs-string">"mynamespace"</span>);

    <span class="hljs-comment">// a private function, only accessible to other things</span>
    <span class="hljs-comment">// inside this closure - this is discouraged</span>
    <span class="hljs-keyword">var</span> privateFunc = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        ...
    };

    <span class="hljs-comment">// a public function, attached to the namespace - this is recommended</span>
    mynamespace.publicFunc = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        ...
    };

})(jQuery, fluid_2_0);
</code></pre>
<p>You might like to think of the <a href="https://github.com/fluid-project/infusion/blob/infusion-1.5/src/framework/core/js/Fluid.js#L957-L966"><code>fluid.registerNamespace</code></a> call as equivalent to a line such as <code>var mynamespace = mynamespace || {};</code> written at the global scope. It is less cumbersome and more expressive of your intention, as well as easily allowing you to declare nested namespaces in one definition. Use this framework utility unless your requirements are very sophisticated.</p>
<p>The parameters to the anonymous function, <code>$</code> and <code>fluid</code>, will be used as shorthand for the arguments that were passed in: <code>jQuery</code> and <code>fluid_2_0</code> respectively. This allow us, for example, to upgrade to the next version of Infusion (e.g. <code>fluid_2_1</code>) simply by changing the one argument, instead of having to change every single use of the word <code>fluid</code>. It also allows us to have multiple versions of Infusion running at the same time, but acting independently.</p>
<h3 id="example">Example</h3>
<p>So what might this look like in your currency converter application? Well, you might call the global namespace <code>currency</code> and create a public function called <code>converter</code> that can be used by anyone to instantiate a converter component:</p>
<pre class="highlight"><code class="hljs javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">($, fluid)</span> {</span>
    fluid.registerNamespace(<span class="hljs-string">"currency"</span>);
    <span class="hljs-comment">// put any private things the currency converter will need here</span>


    <span class="hljs-comment">// EITHER: the converter creation function - this is discouraged</span>
    currency.converter = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
        ...
    };
    <span class="hljs-comment">// OR: a creator function automatically managed by Infusion - this is recommended</span>
    fluid.defaults(<span class="hljs-string">"currency.converter"</span>, {
        ...
    });

})(jQuery, fluid_2_0);
</code></pre>
<p>Next: <a href="PickAComponentType.html">Pick a Component Type</a></p>

                    </div>

                </article>

            </div>

            <footer class="row infusion-docs-footer">
                <p class="infusion-docs-footerInfusion">Infusion is created by the <a href="http://fluidproject.org/" target="_blank">Fluid Project</a>,<br/>
                a project of the <a href="http://idrc.ocad.ca/" target="_blank">Inclusive Design Research Centre</a> at <a href="http://www.ocadu.ca/" target="_blank">OCAD University</a>, funded by a grant from <a href="http://www.mellon.org/" target="_blank">The Andrew W. Mellon Foundation</a>.</p>
            </footer>

        </div> <!-- end container -->

    </body>
</html>
