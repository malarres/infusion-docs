<!DOCTYPE html>
<html lang="en">
    <head>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <title>API Changes from 1.5 to 2.0 | Fluid Infusion</title>
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/foundation.css">
        <link rel="stylesheet" href="css/highlightjs-custom.css">
        <link rel="stylesheet" type="text/css" href="lib/infusion/src/framework/preferences/css/Enactors.css" />
        <link rel="stylesheet" type="text/css" href="lib/infusion/src/framework/preferences/css/PrefsEditor.css" />
        <link rel="stylesheet" type="text/css" href="lib/infusion/src/framework/preferences/css/SeparatedPanelPrefsEditor.css" />
        <link rel="stylesheet" href="css/infusion-docs.css">

        <link rel="icon" type="image/png" href="images/favico.png">

        <script type="text/javascript" src="lib/infusion/infusion-uio.js"></script>
    </head>
    <body class="infusion-docs">

        <div class="container infusion-docs-container">

            <!-- BEGIN markup for Preference Editor -->
            <div class="flc-prefsEditor-separatedPanel fl-prefsEditor-separatedPanel">
                <!-- This is the div that will contain the Preference Editor component -->
                <div class="flc-slidingPanel-panel flc-prefsEditor-iframe"></div>

                <!-- This div is for the sliding panel that shows and hides the Preference Editor controls -->
                <div class="fl-panelBar">
                    <span class="fl-prefsEditor-buttons">
                        <button id="reset" class="flc-prefsEditor-reset fl-prefsEditor-reset"><span class="fl-icon-undo"></span> Reset</button>
                        <button id="show-hide" class="flc-slidingPanel-toggleButton fl-prefsEditor-showHide"> Show/Hide</button>
                    </span>
                </div>
            </div>
            <!-- END markup for Preference Editor -->

            <script type="text/javascript">
                fluid.uiOptions.prefsEditor(".flc-prefsEditor-separatedPanel", {
                    "templatePrefix": "lib/infusion/src/framework/preferences/html/",
                    "messagePrefix": "lib/infusion/src/framework/preferences/messages/",
                    "tocTemplate": "lib/infusion/src/components/tableOfContents/html/TableOfContents.html"
                });
            </script>

            <header class="row infusion-docs-header">
                <div class="infusion-docs-fluidLogo small-12 medium-3 column">
                    <a class="infusion-docs-fluidLogoText" href="index.html" title="Infusion">infusion</a>
                </div>

                <nav class="small-12 medium-9 column">
                    <a href="index.html" title="Infusion">Infusion</a>
                    <a href="index-tutorials.html" title="Tutorials">Tutorials</a>
                    <a href="index-api.html" title="A P I">API</a>
                </nav>
            </header>

            <div class="row infusion-docs-mainBody">
                <nav class="infusion-docs-TOC small-12 medium-3 column">
                    
                        
                        
                            <span class="infusion-docs-category">Infusion</span>
                            
                                <span class="infusion-docs-sectionName">Components</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="FrameworkConcepts.html"><span class="infusion-docs-TOC-pageName">Framework Concepts</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="UnderstandingInfusionComponents.html"><span class="infusion-docs-TOC-pageName">Understanding Infusion Components</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ComponentOptionsAndDefaults.html"><span class="infusion-docs-TOC-pageName">Understanding Component Options And Their Defaults</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ComponentConfigurationOptions.html"><span class="infusion-docs-TOC-pageName">Component Configuration Options</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ComponentGrades.html"><span class="infusion-docs-TOC-pageName">Component Grades</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="OptionsMerging.html"><span class="infusion-docs-TOC-pageName">Options Merging</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ComponentLifecycle.html"><span class="infusion-docs-TOC-pageName">Component Lifecycle</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="DOMBinder.html"><span class="infusion-docs-TOC-pageName">DOM Binder</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Inversion of Control</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="HowToUseInfusionIoC.html"><span class="infusion-docs-TOC-pageName">How To Use Infusion IoC</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="SubcomponentDeclaration.html"><span class="infusion-docs-TOC-pageName">Subcomponent Declaration</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Contexts.html"><span class="infusion-docs-TOC-pageName">Contexts</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Invokers.html"><span class="infusion-docs-TOC-pageName">Invokers</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ExpansionOfComponentOptions.html"><span class="infusion-docs-TOC-pageName">Expansion Of Component Options</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="IoCSS.html"><span class="infusion-docs-TOC-pageName">IoCSS</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="DeclarativeThisismInIoC.html"><span class="infusion-docs-TOC-pageName">Declarative this-ism In IoC</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="IoCReferences.html"><span class="infusion-docs-TOC-pageName">IoC References</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Events</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="Events.html"><span class="infusion-docs-TOC-pageName">Events</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="InfusionEventSystem.html"><span class="infusion-docs-TOC-pageName">Infusion Event System</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="EventInjectionAndBoiling.html"><span class="infusion-docs-TOC-pageName">Event injection and boiling</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">ChangeApplier</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="ChangeApplier.html"><span class="infusion-docs-TOC-pageName">ChangeApplier</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Renderer</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="Renderer.html"><span class="infusion-docs-TOC-pageName">Renderer</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="HowToUseTheRenderer.html"><span class="infusion-docs-TOC-pageName">How To Use the Renderer</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="RendererComponentTrees.html"><span class="infusion-docs-TOC-pageName">Renderer Component Trees</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ProtoComponentTypes.html"><span class="infusion-docs-TOC-pageName">ProtoComponent Types</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="RendererComponentTreeExpanders.html"><span class="infusion-docs-TOC-pageName">Renderer Component Tree Expanders</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Cutpoints.html"><span class="infusion-docs-TOC-pageName">Cutpoints</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="RendererComponents.html"><span class="infusion-docs-TOC-pageName">Renderer Components</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="RendererDecorators.html"><span class="infusion-docs-TOC-pageName">Renderer Decorators</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Preferences Framework</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="PreferencesFramework.html"><span class="infusion-docs-TOC-pageName">Preferences Framework</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="PreferencesEditor.html"><span class="infusion-docs-TOC-pageName">Preferences Editor</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Builder.html"><span class="infusion-docs-TOC-pageName">Builder</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="PrimarySchemaForPreferencesFramework.html"><span class="infusion-docs-TOC-pageName">Primary Schema</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="AuxiliarySchemaForPreferencesFramework.html"><span class="infusion-docs-TOC-pageName">Auxiliary Schema</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ConnectingThePartsOfAPreferencesEditor.html"><span class="infusion-docs-TOC-pageName">Connecting the Parts of a Preferences Editor</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Enactors.html"><span class="infusion-docs-TOC-pageName">Enactors</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Panels.html"><span class="infusion-docs-TOC-pageName">Panels</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="CompositePanels.html"><span class="infusion-docs-TOC-pageName">Composite Panels</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ConditionalSubpanels.html"><span class="infusion-docs-TOC-pageName">Conditional Subpanels</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="LocalizationInThePreferencesFramework.html"><span class="infusion-docs-TOC-pageName">Localization in the Preferences Framework</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">General</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="ModelRelay.html"><span class="infusion-docs-TOC-pageName">Model Relay</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ProgressiveEnhancement.html"><span class="infusion-docs-TOC-pageName">Progressive Enhancement</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ClassNameConventions.html"><span class="infusion-docs-TOC-pageName">Class Name Conventions</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="IoCTestingFramework.html"><span class="infusion-docs-TOC-pageName">IoC Testing Framework</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Migrating to Infusion 1.5</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="APIChangesFrom1_4To1_5.html"><span class="infusion-docs-TOC-pageName">API Changes from 1.4 to 1.5</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="DeprecationsIn1_5.html"><span class="infusion-docs-TOC-pageName">Deprecations In 1.5</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="tutorial-migratingToInfusion1.5/UIOptionsMigration.html"><span class="infusion-docs-TOC-pageName">UI Options Migration</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="tutorial-migratingToInfusion1.5/PagerMigration.html"><span class="infusion-docs-TOC-pageName">Pager Migration</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Migrating to Infusion 2.0</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <span class="infusion-docs-TOC-pageName">API Changes from 1.5 to 2.0</span>
                                            
                                        </li>
                                    
                                </ul>
                            
                        
                    
                        
                        
                    
                        
                        
                    
                </nav>

                <article class="infusion-docs-mainContent small-12 medium-9 column">

                    <div class="flc-toc-tocContainer infusion-docs-toc"> </div>

                    <h1>API Changes from 1.5 to 2.0</h1>

                    <p class="infusion-docs-githubLink"><a href="https://github.com/fluid-project/infusion-docs/blob/master/src/documents/APIChangesFrom1_5To2_0.md" target="_blank">Edit on GitHub</a></p>

                    

                    <div class="infusion-docs-articleBody">
                        <p>This page contains a list of the features, APIs, and etc. that have changed in Infusion 2.0.</p>
<h2 id="framework-changes">Framework Changes</h2>
<h3 id="preferences-framework">Preferences Framework</h3>
<h4 id="namespace-changes">Namespace Changes</h4>
<p>Rename &quot;fluid.prefs.enactors&quot; to &quot;fluid.prefs.enactor&quot;</p>
<h4 id="component-grade-changes">Component Grade Changes</h4>
<div class="infusion-docs-note"><strong>Note:</strong> According to the <a href="https://github.com/fluid-project/infusion/blob/master/src/framework/core/js/FluidView.js#L38-L39">comment</a> on the implementation for relay components, in Infusion 2.0, relay components will be renamed back to its original names. If the rename has been made, this section can be ignored.</div>

<ul>
<li>Replace &quot;fluid.modelComponent&quot; with &quot;fluid.modelRelayComponent&quot;</li>
<li>Replace &quot;fluid.standardComponent&quot; with &quot;fluid.standardRelayComponent&quot;</li>
<li>Replace &quot;fluid.viewComponent&quot; with &quot;fluid.viewRelayComponent&quot;</li>
<li>Replace &quot;fluid.rendererComponent&quot; with &quot;fluid.rendererRelayComponent&quot;</li>
</ul>
<h4 id="model-sharing-changes">Model Sharing Changes</h4>
<h5 id="in-1-5">In 1.5</h5>
<p>In Infusion 1.5, sharing models between non-relay components requires the change applier to be shared as a member option along with the model:</p>
<pre class="highlight"><code class="hljs javascript">fluid.default(<span class="hljs-string">"fluid.parent"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.standardComponent"</span>, <span class="hljs-string">"autoInit"</span>],
    components: {
        child: {
            type: <span class="hljs-string">"fluid.standardComponent"</span>,
            options: {
                members: {
                    applier: <span class="hljs-string">"{parent}.applier"</span>
                },
                model: <span class="hljs-string">"{parent}.model"</span>
            }
        }
    }
});
</code></pre>
<h5 id="in-2-0">In 2.0</h5>
<p>In Infusion 2.0 where relay components are introduced, sharing models no longer requires the change applier to be shared:</p>
<pre class="highlight"><code class="hljs javascript">fluid.default(<span class="hljs-string">"fluid.parent"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.standardRelayComponent"</span>, <span class="hljs-string">"autoInit"</span>],
    components: {
        child: {
            type: <span class="hljs-string">"fluid.standardRelayComponent"</span>,
            options: {
                model: <span class="hljs-string">"{parent}.model"</span>
            }
        }
    }
});
</code></pre>
<h4 id="enactor-listener-changes">Enactor Listener Changes</h4>
<h5 id="in-1-5">In 1.5</h5>
<p>In Infusion 1.5, enactors use non-relay components where the decalration of model listeners had not been implemented. Enactors use:</p>
<ul>
<li>The <code>finalInit()</code> function to register model listeners</li>
<li>An <code>onCreate</code> listener to apply the initial preference value that the model receives:</li>
</ul>
<pre class="highlight"><code class="hljs javascript">fluid.defaults(<span class="hljs-string">"fluid.prefs.enactor.textSize"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.viewComponent"</span>, <span class="hljs-string">"fluid.prefs.enactor"</span>, <span class="hljs-string">"autoInit"</span>],
    preferenceMap: {
        <span class="hljs-string">"fluid.prefs.textSize"</span>: {
            <span class="hljs-string">"model.value"</span>: <span class="hljs-string">"default"</span>
        }
    },
    invokers: {
        set: {
            funcName: <span class="hljs-string">"fluid.prefs.enactor.textSize.set"</span>,
            args: [<span class="hljs-string">"{arguments}.0"</span>, <span class="hljs-string">"{that}"</span>]
        }
    },
    listeners: {
        onCreate: {
            listener: <span class="hljs-string">"{that}.set"</span>,
            args: <span class="hljs-string">"{that}.model.value"</span>
        }
    }
});

fluid.prefs.enactor.textSize.set = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value, that)</span> {</span>
    that.root.css(<span class="hljs-string">"font-size"</span>, value + <span class="hljs-string">"px"</span>);
};

fluid.prefs.enactor.textSize.finalInit = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(that)</span> {</span>
    that.applier.modelChanged.addListener(<span class="hljs-string">"value"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(newModel)</span> {</span>
        that.set(newModel.value);
    });
};
</code></pre>
<h5 id="in-2-0">In 2.0</h5>
<p>In Infusion 2.0 where enactors use relay components, the <code>finalInit()</code> and the <code>onCreate</code> listener are replaced by declaring a model listener:</p>
<pre class="highlight"><code class="hljs javascript">fluid.defaults(<span class="hljs-string">"fluid.prefs.enactor.textSize"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.viewComponent"</span>, <span class="hljs-string">"fluid.prefs.enactor"</span>, <span class="hljs-string">"autoInit"</span>],
    preferenceMap: {
        <span class="hljs-string">"fluid.prefs.textSize"</span>: {
            <span class="hljs-string">"model.value"</span>: <span class="hljs-string">"default"</span>
        }
    },
    invokers: {
        set: {
            funcName: <span class="hljs-string">"fluid.prefs.enactor.textSize.set"</span>,
            args: [<span class="hljs-string">"{arguments}.0"</span>, <span class="hljs-string">"{that}"</span>]
        }
    },
    modelListeners: {
        value: {
            listener: <span class="hljs-string">"{that}.set"</span>,
            args: [<span class="hljs-string">"{change}.value"</span>]
        }
    }
});

fluid.prefs.enactor.textSize.set = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(value, that)</span> {</span>
    that.root.css(<span class="hljs-string">"font-size"</span>, value + <span class="hljs-string">"px"</span>);
};
</code></pre>

                    </div>

                </article>

            </div>

            <footer class="row infusion-docs-footer">
                <p class="infusion-docs-footerInfusion">Infusion is created by the <a href="http://fluidproject.org/" target="_blank">Fluid Project</a>,<br/>
                a project of the <a href="http://idrc.ocad.ca/" target="_blank">Inclusive Design Research Centre</a> at <a href="http://www.ocadu.ca/" target="_blank">OCAD University</a>, funded by a grant from <a href="http://www.mellon.org/" target="_blank">The Andrew W. Mellon Foundation</a>.</p>
            </footer>

        </div> <!-- end container -->

    </body>
</html>
