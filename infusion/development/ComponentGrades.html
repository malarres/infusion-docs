<!DOCTYPE html>
<html lang="en">
    <head>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <title>Component Grades | Fluid Infusion</title>
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/foundation.css">
        <link rel="stylesheet" href="css/highlightjs-custom.css">
        <link rel="stylesheet" type="text/css" href="lib/infusion/src/framework/preferences/css/Enactors.css" />
        <link rel="stylesheet" type="text/css" href="lib/infusion/src/framework/preferences/css/PrefsEditor.css" />
        <link rel="stylesheet" type="text/css" href="lib/infusion/src/framework/preferences/css/SeparatedPanelPrefsEditor.css" />
        <link rel="stylesheet" href="css/infusion-docs.css">

        <link rel="icon" type="image/png" href="images/favico.png">

        <script type="text/javascript" src="lib/infusion/infusion-uio.js"></script>
    </head>
    <body class="infusion-docs">

        <div class="container infusion-docs-container">

            <!-- BEGIN markup for Preference Editor -->
            <div class="flc-prefsEditor-separatedPanel fl-prefsEditor-separatedPanel">
                <!-- This is the div that will contain the Preference Editor component -->
                <div class="flc-slidingPanel-panel flc-prefsEditor-iframe"></div>

                <!-- This div is for the sliding panel that shows and hides the Preference Editor controls -->
                <div class="fl-panelBar">
                    <span class="fl-prefsEditor-buttons">
                        <button id="reset" class="flc-prefsEditor-reset fl-prefsEditor-reset"><span class="fl-icon-undo"></span> Reset</button>
                        <button id="show-hide" class="flc-slidingPanel-toggleButton fl-prefsEditor-showHide"> Show/Hide</button>
                    </span>
                </div>
            </div>
            <!-- END markup for Preference Editor -->

            <script type="text/javascript">
                fluid.uiOptions.prefsEditor(".flc-prefsEditor-separatedPanel", {
                    "templatePrefix": "lib/infusion/src/framework/preferences/html/",
                    "messagePrefix": "lib/infusion/src/framework/preferences/messages/",
                    "tocTemplate": "lib/infusion/src/components/tableOfContents/html/TableOfContents.html"
                });
            </script>

            <header class="row infusion-docs-header">
                <div class="infusion-docs-fluidLogo small-12 medium-3 column">
                    <a class="infusion-docs-fluidLogoText" href="index.html" title="Infusion">infusion</a>
                </div>

                <nav class="small-12 medium-9 column">
                    <a href="index.html" title="Infusion">Infusion</a>
                    <a href="index-tutorials.html" title="Tutorials">Tutorials</a>
                    <a href="index-api.html" title="A P I">API</a>
                </nav>
            </header>

            <div class="row infusion-docs-mainBody">
                <nav class="infusion-docs-TOC small-12 medium-3 column">
                    
                        
                        
                            <span class="infusion-docs-category">Infusion</span>
                            
                                <span class="infusion-docs-sectionName">Components</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="FrameworkConcepts.html"><span class="infusion-docs-TOC-pageName">Framework Concepts</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="UnderstandingInfusionComponents.html"><span class="infusion-docs-TOC-pageName">Understanding Infusion Components</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ComponentOptionsAndDefaults.html"><span class="infusion-docs-TOC-pageName">Understanding Component Options And Their Defaults</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ComponentConfigurationOptions.html"><span class="infusion-docs-TOC-pageName">Component Configuration Options</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <span class="infusion-docs-TOC-pageName">Component Grades</span>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="OptionsMerging.html"><span class="infusion-docs-TOC-pageName">Options Merging</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ComponentLifecycle.html"><span class="infusion-docs-TOC-pageName">Component Lifecycle</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="DOMBinder.html"><span class="infusion-docs-TOC-pageName">DOM Binder</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Inversion of Control</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="HowToUseInfusionIoC.html"><span class="infusion-docs-TOC-pageName">How To Use Infusion IoC</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="SubcomponentDeclaration.html"><span class="infusion-docs-TOC-pageName">Subcomponent Declaration</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Contexts.html"><span class="infusion-docs-TOC-pageName">Contexts</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Invokers.html"><span class="infusion-docs-TOC-pageName">Invokers</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ExpansionOfComponentOptions.html"><span class="infusion-docs-TOC-pageName">Expansion Of Component Options</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="IoCSS.html"><span class="infusion-docs-TOC-pageName">IoCSS</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="DeclarativeThisismInIoC.html"><span class="infusion-docs-TOC-pageName">Declarative this-ism In IoC</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="IoCReferences.html"><span class="infusion-docs-TOC-pageName">IoC References</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Events</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="Events.html"><span class="infusion-docs-TOC-pageName">Events</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="InfusionEventSystem.html"><span class="infusion-docs-TOC-pageName">Infusion Event System</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="EventInjectionAndBoiling.html"><span class="infusion-docs-TOC-pageName">Event injection and boiling</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">ChangeApplier</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="ChangeApplier.html"><span class="infusion-docs-TOC-pageName">ChangeApplier</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Renderer</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="Renderer.html"><span class="infusion-docs-TOC-pageName">Renderer</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="HowToUseTheRenderer.html"><span class="infusion-docs-TOC-pageName">How To Use the Renderer</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="RendererComponentTrees.html"><span class="infusion-docs-TOC-pageName">Renderer Component Trees</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ProtoComponentTypes.html"><span class="infusion-docs-TOC-pageName">ProtoComponent Types</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="RendererComponentTreeExpanders.html"><span class="infusion-docs-TOC-pageName">Renderer Component Tree Expanders</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Cutpoints.html"><span class="infusion-docs-TOC-pageName">Cutpoints</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="RendererComponents.html"><span class="infusion-docs-TOC-pageName">Renderer Components</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="RendererDecorators.html"><span class="infusion-docs-TOC-pageName">Renderer Decorators</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Preferences Framework</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="PreferencesFramework.html"><span class="infusion-docs-TOC-pageName">Preferences Framework</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="PreferencesEditor.html"><span class="infusion-docs-TOC-pageName">Preferences Editor</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Builder.html"><span class="infusion-docs-TOC-pageName">Builder</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="PrimarySchemaForPreferencesFramework.html"><span class="infusion-docs-TOC-pageName">Primary Schema</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="AuxiliarySchemaForPreferencesFramework.html"><span class="infusion-docs-TOC-pageName">Auxiliary Schema</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ConnectingThePartsOfAPreferencesEditor.html"><span class="infusion-docs-TOC-pageName">Connecting the Parts of a Preferences Editor</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Enactors.html"><span class="infusion-docs-TOC-pageName">Enactors</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Panels.html"><span class="infusion-docs-TOC-pageName">Panels</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="CompositePanels.html"><span class="infusion-docs-TOC-pageName">Composite Panels</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ConditionalSubpanels.html"><span class="infusion-docs-TOC-pageName">Conditional Subpanels</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="LocalizationInThePreferencesFramework.html"><span class="infusion-docs-TOC-pageName">Localization in the Preferences Framework</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">General</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="ModelRelay.html"><span class="infusion-docs-TOC-pageName">Model Relay</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ProgressiveEnhancement.html"><span class="infusion-docs-TOC-pageName">Progressive Enhancement</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ClassNameConventions.html"><span class="infusion-docs-TOC-pageName">Class Name Conventions</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="IoCTestingFramework.html"><span class="infusion-docs-TOC-pageName">IoC Testing Framework</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Migrating to Infusion 1.5</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="APIChangesFrom1_4To1_5.html"><span class="infusion-docs-TOC-pageName">API Changes from 1.4 to 1.5</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="DeprecationsIn1_5.html"><span class="infusion-docs-TOC-pageName">Deprecations In 1.5</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="tutorial-migratingToInfusion1.5/UIOptionsMigration.html"><span class="infusion-docs-TOC-pageName">UI Options Migration</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="tutorial-migratingToInfusion1.5/PagerMigration.html"><span class="infusion-docs-TOC-pageName">Pager Migration</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Migrating to Infusion 2.0</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="APIChangesFrom1_5To2_0.html"><span class="infusion-docs-TOC-pageName">API Changes from 1.5 to 2.0</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                        
                    
                        
                        
                    
                        
                        
                    
                </nav>

                <article class="infusion-docs-mainContent small-12 medium-9 column">

                    <div class="flc-toc-tocContainer infusion-docs-toc"> </div>

                    <h1>Component Grades</h1>

                    <p class="infusion-docs-githubLink"><a href="https://github.com/fluid-project/infusion-docs/blob/master/src/documents/ComponentGrades.md" target="_blank">Edit on GitHub</a></p>

                    

                    <div class="infusion-docs-articleBody">
                        <p>A component <strong>grade</strong> extends the notion of component defaults (<a href="https://github.com/fluid-project/infusion/blob/infusion-1.5/src/framework/core/js/Fluid.js#L1519-L1539">fluid.defaults</a>). In fact, every <strong>fluid.defaults</strong> directive introduces a <strong>grade</strong> into the system of Fluid Infusion components, which can be built on to derive further grades/components. This derivation occurs by mentioning the name of the original grade within the <strong>gradeNames</strong> section of the derived component.</p>
<p>Developers can create their own <strong>fluid.defaults / grades</strong> as well as use them to build upon each other, and compose them as needed.</p>
<p>The Infusion Framework already contains several predefined component grades that normally form the initial building blocks for external components and grades. The following table describes these grades and how they relate to each other.</p>
<table>
    <thead>
        <tr>
            <th>Grade Name</th>
            <th>&quot;Relay&quot; Version <sup>[1]</sup></th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>autoinit</td>
            <td></td>
            <td>
                <p>
                    A special directive grade that instructs the framework to automatically construct a globally named creator function (with the same name as the grade) responsible for the construction of the component. NOTE: for the Infusion 2.0 release this grade will become redundant as it will be the default for every grade
                </p>
                <p>
                    <em>
                        <strong>NOTE:</strong> for the Infusion 2.0 release this grade will become redundant as it will be the default for every grade
                    </em>
                </p>
            </td>
        </tr>
        <tr>
            <td>fluid.littleComponent</td>
            <td></td>
            <td>
                A &quot;little&quot; component is the most basic component: it supports options merging with defaults (<a href="tutorial-gettingStartedWithInfusion/BasicComponentCreation-LittleComponents.html">Little Components</a>). All Fluid components are derived from this grade, and in general all things not derived from this grade are non-components (e.g. plain functions, or model transformation transforms, etc.)
            </td>
        </tr>
        <tr>
            <td>fluid.modelComponent</td>
            <td>fluid.modelRelayComponent</td>
            <td>
                A &quot;model&quot; component is already a little component that additionally provides supports for a component&#39;s model, defined in the components options, and operations on it (<a href="tutorial-gettingStartedWithInfusion/ModelComponents.html">Tutorial - Model Components</a>).
            </td>
        </tr>
        <tr>
            <td>fluid.eventedComponent</td>
            <td></td>
            <td>
                An &quot;evented&quot; component is already a little component that additionally instantiates event firers based on default framework events (onCreate, onDestroy, onDetach) and events declared in the options (<a href="tutorial-gettingStartedWithInfusion/EventedComponents.html">Tutorial - Evented Components</a>).
            </td>
        </tr>
        <tr>
            <td>fluid.standardComponent</td>
            <td>fluid.standardRelayComponent</td>
            <td>
                A compound of fluid.modelComponent and fluid.eventedComponent
            </td>
        </tr>
        <tr>
            <td>fluid.viewComponent</td>
            <td>fluid.viewRelayComponent</td>
            <td>
                A &quot;view&quot; component is a fluid.standardComponent is bound to a DOM container node, holds a <a href="DOMBinder.html">DOM Binder</a> and supports a view (<a href="tutorial-gettingStartedWithInfusion/ViewComponents.html">Tutorial - View Components).
            </td>
        </tr>
        <tr>
            <td>fluid.rendererComponent</td>
            <td>fluid.rendererRelayComponent</td>
            <td>
                A &quot;renderer&quot; component is already a vew component that bears a renderer. There are additional features provided by this component grade specified on the <a href="RendererComponents.html#useful-functions-and-events">Useful functions and events</a> section of the <a href="tutorial-gettingStartedWithInfusion/RendererComponents.html">Tutorial - Renderer Components</a> page
            </td>
        </tr>
    </tbody>
</table>

<p><em><strong>[1]</strong> About the special &quot;relay&quot; grades - as part of the work on the <a href="http://wiki.fluidproject.org/display/fluid/New+Notes+on+the+ChangeApplier">New ChangeApplier</a> in the 1.5 release of Infusion, every standard grade descended from fluid.modelComponent has acquired a parallel version including the word &quot;relay&quot; that allows access to the new ChangeApplier on an &quot;opt in basis&quot;. During the course of 2014 we will be incrementally updating each Infusion component to the new &quot;relay&quot; grades, and once this work is complete, the &quot;relay&quot; grades will be renamed back to their standard (left column) names and the old ChangeApplier implementation will be abolished.</em></p>
<h2 id="specifying-parent-grades">Specifying Parent Grades</h2>
<p>A component&#39;s grades should be specified using the <code>gradeNames</code> option in the components defaults block, as shown in the examples below. The <code>gradeNames</code> option holds a string or Array of Strings.</p>
<div class="infusion-docs-note"><strong>Note:</strong> In the examples below, the <code>autoInit</code> flag is not actually a grade, but is added to the <code>gradeNames</code> array to control how the component is created. See <a href="#initializing-graded-components">Initializing Graded Components</a> below for more information about the <code>autoInit</code> flag. The <code>autoInit</code> flag will soon become the default. Always use the <code>autoInit</code> flag, unless you have a very good reason not to.</div>

<pre class="highlight"><code class="hljs javascript">fluid.defaults(<span class="hljs-string">"fluid.uploader.demoRemote"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.eventedComponent"</span>, <span class="hljs-string">"autoInit"</span>],
    ...
});
</code></pre>
<pre class="highlight"><code class="hljs javascript">fluid.defaults(<span class="hljs-string">"cspace.messageBarImpl"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.rendererComponent"</span>, <span class="hljs-string">"autoInit"</span>],
    ...
});
</code></pre>
<pre class="highlight"><code class="hljs javascript">fluid.defaults(<span class="hljs-string">"cspace.util.relationResolver"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.modelComponent"</span>, <span class="hljs-string">"autoInit"</span>],
    ...
});
</code></pre>
<h2 id="initializing-graded-components">Initializing Graded Components</h2>
<p>The Framework offers support for automatic initialization of graded component through <code>autoInit</code>. When the <code>autoInit</code> flag is added to the <code>gradeNames</code> array, the Framework will create the creator function automatically â€“ the developer does not need to write a creator function.</p>
<p>To use the <code>autoInit</code> flag, add it to the array of <code>gradeNames</code>, as shown below:</p>
<pre class="highlight"><code class="hljs javascript">fluid.defaults(<span class="hljs-string">"fluid.uploader.fileQueueView"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.viewComponent"</span>, <span class="hljs-string">"autoInit"</span>],
    ...
});


<span class="hljs-keyword">var</span> that = fluid.uploader.fileQueueView( ... ); <span class="hljs-comment">// The framework has automatically generated this function since the component is autoInit</span>
</code></pre>
<div class="infusion-docs-note"><strong>Note:</strong> The <code>autoInit</code> flag should always be used if you expect the grade to be directly instantiated as a component. It can be omitted if the only use of the grade is as an &quot;add-on&quot; (&quot;<a href="https://en.wikipedia.org/wiki/Mixin">mixin</a>&quot;) to another grade hierarchy.</div>

<h2 id="combining-grades">Combining Grades</h2>
<p>Since the <code>fluid.defaults</code> directive introduces a grade into the system, various components can be composed to create new ones. Options, fields and methods introduced by the ancestor grades will be merged. The merging happens, firstly in hierarchical order (grades comprising the ancestor grade are resolved before the actual component grades resolution) and secondly in the left-to-right order (defaults from the grade on the right taking precedence over the defaults from the grade on the left, more details can be found at the JIRA <a href="http://issues.fluidproject.org/browse/FLUID-5085">FLUID-5085</a>). For example:</p>
<pre class="highlight"><code class="hljs javascript">fluid.defaults(<span class="hljs-string">"examples.componentOne"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.modelComponent"</span>, <span class="hljs-string">"autoInit"</span>],
    model: {
        field1: <span class="hljs-literal">true</span>
    },
    option1: <span class="hljs-string">"TEST"</span>
});



fluid.defaults(<span class="hljs-string">"examples.componentTwo"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.modelComponent"</span>, <span class="hljs-string">"autoInit"</span>],
    model: {
        field1: <span class="hljs-literal">false</span>,
        field2: <span class="hljs-literal">true</span>
    },
    option2: <span class="hljs-string">"TEST2"</span>
});

fluid.defaults(<span class="hljs-string">"examples.combinedComponent"</span>, {
    gradeNames: [<span class="hljs-string">"examples.componentOne"</span>, <span class="hljs-string">"examples.componentTwo"</span>, <span class="hljs-string">"autoInit"</span>]
    <span class="hljs-comment">// The resulting defaults for component examples.combinedComponent will look like this:</span>
    <span class="hljs-comment">// model: {</span>
    <span class="hljs-comment">//     field1: false,</span>
    <span class="hljs-comment">//     field2: true</span>
    <span class="hljs-comment">// },</span>
    <span class="hljs-comment">// option1: "TEST",</span>
    <span class="hljs-comment">// option2: "TEST2"</span>
});
</code></pre>
<div class="infusion-docs-note"><strong>Note:</strong> All the material from the component defaults will be merged by the framework, including records such as <code>events</code>, <code>listeners</code>, <code>members</code>, <code>components</code>, <code>invokers</code> and <code>model</code>. Some of these, e.g. <code>listeners</code> will receive custom merging algorithms sensitive to their context - for example showing awareness of <a href="InfusionEventSystem.html">listener namespaces</a>.</div>

<h2 id="dynamic-grades">Dynamic Grades</h2>
<p>Grades supplied as arguments to a constructing component in the <code>gradeNames</code> field will be added into the grade list of the particular component instance, as if a new <code>fluid.defaults</code> block had been issued creating a new &quot;type&quot; in the system - however, the main <code>type</code> of the component will not change. This facility could be thought of as a form of &quot;type evolution&quot; or <a href="http://scholarworks.umass.edu/cgi/viewcontent.cgi?article=1041&amp;context=cs_faculty_pubs">Schema evolution</a>. All dynamic grades take precedence over (that is, are merged in after) all static grades.</p>
<h3 id="delivering-a-dynamic-gradename-as-a-direct-argument-">Delivering a dynamic gradeName as a direct argument:</h3>
<p>There are numerous ways that these additional gradeNames could be delivered - for example, as a direct argument to a component&#39;s creator function:</p>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-keyword">var</span> myCombinedComponent = examples.componentOne({
    gradeNames: <span class="hljs-string">"examples.componentTwo"</span>
});
<span class="hljs-comment">// creates a component that behaves exactly (except for its typeName)</span>
<span class="hljs-comment">// as if it was created via examples.combinedComponent() above</span>
</code></pre>
<h3 id="delivering-a-dynamic-gradename-via-a-subcomponent-record-">Delivering a dynamic gradeName via a subcomponent record:</h3>
<p>Another possibility is to supply the additional gradeNames via a <a href="tutorial-gettingStartedWithInfusion/Subcomponents.html">subcomponent record</a> - for example</p>
<pre class="highlight"><code class="hljs javascript">fluid.defaults(<span class="hljs-string">"examples.rootComponent"</span>, {
    components: {
        myCombinedComponent: { <span class="hljs-comment">// This component also behaves (except for typeName)</span>
                               <span class="hljs-comment">// as if was created via examples.combinedComponent</span>
            type: <span class="hljs-string">"examples.componentOne"</span>,
            options: {
                gradeNames: <span class="hljs-string">"examples.componentTwo"</span>
            }
        }
    }
});
</code></pre>
<h3 id="delivering-a-dynamic-gradename-via-an-options-distribution-">Delivering a dynamic gradeName via an options distribution:</h3>
<p>Perhaps one of the most powerful possibilities is to distribute dynamic gradeNames to one or more components via a <a href="IoCSS.html">distributeOptions</a> record:</p>
<pre class="highlight"><code class="hljs javascript">fluid.defaults(<span class="hljs-string">"examples.distributingRootComponent"</span>, {
    distributeOptions: {
        record: <span class="hljs-string">"examples.componentTwo"</span>,
        target: <span class="hljs-string">"{that examples.componentOne}.options.gradeNames}"</span>
    },
    components: {
        myCombinedComponent1: {
            type: <span class="hljs-string">"examples.componentOne"</span>,
        },
        myCombinedComponent2: {
            type: <span class="hljs-string">"examples.componentOne"</span>,
        }
    }
});
</code></pre>
<p>In the above example, every subcomponent of <code>examples.distributingRootComponent</code> which had a grade content of <code>examples.componentOne</code> would automatically have <a href="https://en.wikipedia.org/wiki/Mixin">mixed</a> in a grade of <code>examples.componentTwo</code>, causing them all to behave as if they were instances of <code>examples.combinedComponent</code>.</p>
<h2 id="raw-dynamic-grades">Raw Dynamic Grades</h2>
<p>Another very powerful framework facility is the use of raw dynamic grades. In this scheme, the gradeNames list for any component may include any standard <a href="IoCReferences.html">IoC reference</a> which may resolve to either a String or Array of Strings directly holding one or more grade names, or else a zero-arg function which can be invoked to obtain such a value. In this way, the developer can specify additional grade names based on dynamic material (potentially not known at the time of definition) such as a function (method or invoker) or a property in component options. Note that use of this facility should be discouraged in favour of any of the other techniques on this page - e.g. standard dynamic grades or grade linkage - in future versions of the framework the use of raw dynamic grades may impose a big performance penalty.</p>
<p>For example:</p>
<pre class="highlight"><code class="hljs javascript">fluid.defaults(<span class="hljs-string">"fluid.componentWithDynamicGrade"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.littleComponent"</span>, <span class="hljs-string">"autoInit"</span>, <span class="hljs-string">"{that}.getDynamicGradeName"</span>],
    invokers: {
        getDynamicGradeName: <span class="hljs-string">"fluid.componentWithDynamicGrade.getDynamicGradeName"</span>
    }
});

<span class="hljs-comment">// When resolved our fluid.componentWithDynamicGrade will have all the functionality of a fluid.modelComponent grade.</span>
<span class="hljs-comment">// NOTE: developers can also return an array of grade names. These grade names can be custom grade names.</span>
fluid.componentWithDynamicGrade.getDynamicGradeName = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"fluid.modelComponent"</span>;
};
</code></pre>
<h2 id="grade-linkage">Grade Linkage</h2>
<p>A powerful scheme for producing components whose grade content depends on combinations of other grades, or else to &quot;advise&quot; an already existing grade to append further grades into its components without redefining it, is <strong>grade linkage</strong>. In the current framework this is an experimental and extremely expensive (in CPU) facility which is only available on an &quot;opt-in&quot; basis, although it will be optimised and refined in future versions of the framework. The original implementation and the need for it are described in the JIRA <a href="http://issues.fluidproject.org/browse/FLUID-5212">FLUID-5212</a>. This rarely-required facility covers the part of the framework&#39;s responsibilities that mostly relate to situations where some form of <a href="https://en.wikipedia.org/wiki/Multiple_dispatch">multiple dispatch</a> is required.</p>
<p>A component opts in to the grade linkage system by including the framework grade <code>fluid.applyGradeLinkage</code>. This grade may itself be supplied dynamically by any of the schemes listed earlier in this page. Whenever an instance of a component which has opted in starts to construct, the complete list of all of its grades, both static and dynamic, are checked against all grade linkage records which have been registered into the system holding the grade <code>fluid.gradeLinkageRecord</code>. Each of these linkage records will have the grades that they list in the field <code>contextGrades</code> checked against the component&#39;s total set of grades - if <strong>every one</strong> of them appears in the component, then all of the grades mentioned in the record&#39;s <code>resultGrades</code> entry will be added into the constructing component&#39;s set of grades. The dynamic grade resolution process will then kick off again until no further grades arrive.</p>
<p>The following example demonstrates the process from end to end:</p>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">// Sets up a component which opts into the grade linkage system and has a parent grade of "examples.componentOne"</span>
fluid.defaults(<span class="hljs-string">"examples.gradeLinkageComponent"</span>, {
    gradeNames: [<span class="hljs-string">"examples.componentOne"</span>, <span class="hljs-string">"fluid.applyGradeLinkage"</span>, <span class="hljs-string">"autoInit"</span>],
});

<span class="hljs-comment">// Sets up a "grade linkage record" that states that any opted-in component which comes to</span>
<span class="hljs-comment">// have both "examples.componentOne" AND "examples.componentTwo" as grades through any route,</span>
<span class="hljs-comment">// will automatically be also given grade "examples.componentOneAndTwo"</span>
fluid.defaults(<span class="hljs-string">"examples.oneTwoLinkage"</span>, {
    gradeNames: [<span class="hljs-string">"fluid.gradeLinkageRecord"</span>, <span class="hljs-string">"autoInit"</span>],
    contextGrades: [<span class="hljs-string">"examples.componentOne"</span>, <span class="hljs-string">"examples.componentTwo"</span>],
    resultGrades: <span class="hljs-string">"examples.componentOneAndTwo"</span>
});

<span class="hljs-comment">// Construct an instance of our component supplying an additional dynamic grade of "examples.componentTwo" -</span>
<span class="hljs-comment">// this will activate the grade linkage system and automatically supply the further grade of "examples.componentOneAndTwo"</span>
<span class="hljs-keyword">var</span> that = examples.gradeLinkageComponent({
    gradeNames: <span class="hljs-string">"examples.componentTwo"</span>
});
fluid.hasGrade(that.options, <span class="hljs-string">"examples.componentOneAndTwo"</span>); <span class="hljs-comment">// true</span>
</code></pre>
<p>Once the implementation for this feature has bedded down, the framework grade <code>fluid.applyGradeLinkage</code> will be removed and all components will be opted-in by default.</p>

                    </div>

                </article>

            </div>

            <footer class="row infusion-docs-footer">
                <p class="infusion-docs-footerInfusion">Infusion is created by the <a href="http://fluidproject.org/" target="_blank">Fluid Project</a>,<br/>
                a project of the <a href="http://idrc.ocad.ca/" target="_blank">Inclusive Design Research Centre</a> at <a href="http://www.ocadu.ca/" target="_blank">OCAD University</a>, funded by a grant from <a href="http://www.mellon.org/" target="_blank">The Andrew W. Mellon Foundation</a>.</p>
            </footer>

        </div> <!-- end container -->

    </body>
</html>
